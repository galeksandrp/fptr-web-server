{"openapi":"3.1.0","info":{"title":"Report API","description":"Документация по API для интеграций и фронтенда","version":"25.11.24"},"servers":[{"url":"http://0.0.0.0:8088/api","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Отчеты","description":"Создание текстовых и Excel-отчетов по устройствам и группам"},{"name":"Позиции","description":"Получение позиций устройств"},{"name":"Rosneft / Fuel Cards","description":"Интеграция с Rosneft и работа с топливными картами"},{"name":"Шаблоны пользователя","description":"Чтение и сохранение избранных шаблонов пользователя"},{"name":"Треки","description":"Создание текстовых отчётов-треков для устройств"},{"name":"PPR / Fuel Cards","description":"Интеграция с Petrol Plus и работа с топливными картами"}],"paths":{"/users/{id}/templates":{"get":{"tags":["Шаблоны пользователя"],"summary":"Получить избранные шаблоны пользователя","description":"Возвращает JSON-строку с id избранных шаблонов пользователя.\nСодержимое хранится как строка и отдается без трансформации.\n","operationId":"getTemplates","parameters":[{"name":"id","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Шаблоны получены","content":{"application/json":{"schema":{"type":"string"},"examples":{"Пример":{"description":"Пример","value":[12,14]}}}}},"401":{"description":"Неавторизован"}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Шаблоны пользователя"],"summary":"Сохранить избранные шаблоны пользователя","description":"Принимает JSON-строку с шаблонами и полностью перезаписывает текущее значение.\n","operationId":"setTemplate","parameters":[{"name":"id","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"JSON со списком избранных шаблонов","content":{"application/json":{"schema":{"type":"string"},"examples":{"Пример":{"description":"Пример","value":[12,14]}}}},"required":true},"responses":{"200":{"description":"Шаблоны сохранены"},"400":{"description":"Некорректное тело запроса"},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}},"security":[{"bearerAuth":[]}]}},"/rosneft/integration/cards":{"post":{"tags":["Rosneft / Fuel Cards"],"summary":"Список топливных карт из Роснефть","description":"Принимает учётные данные интеграции и возвращает список топливных карт Роснефть.","operationId":"getFuelCards","requestBody":{"description":"Учётные данные интеграции с Роснефть","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RosneftCredential"}}},"required":true},"responses":{"200":{"description":"Список карт получен","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FuelCardRosneft"}}}}}},"security":[{"bearerAuth":[]}]}},"/reports/messages":{"post":{"tags":["Отчеты"],"summary":"Генерация позиционного отчета по устройству для модуля \"сообщения \"","description":"Генерирует отчет о позициях по переданному ID устройства за заданный временной период.\n","operationId":"createPositionsReport","parameters":[{"name":"deviceId","in":"query","description":"ID устройства","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"source","in":"query","description":"Источник данных(для удобства фронта ,на содержимое ответа по позициям не влияет)","required":false,"schema":{"type":"string"}}],"requestBody":{"description":"Период, за который формируется отчет (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Period"}}},"required":true},"responses":{"200":{"description":"Отчет успешно сформирован","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PositionReportDto"}}}}}},"security":[{"bearerAuth":[]}]}},"/reports/excel/sensors/temper":{"post":{"tags":["Отчеты"],"summary":"Генерация excel отчета о работе датчика температуры.","description":"Генерирует excel отчет о работе датчика температуры","operationId":"createTemperSensorReportExcel","parameters":[{"name":"deviceId","in":"query","description":"ID устройства, необходимое для получения позиций этого устройства.","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"sensorId","in":"query","description":"id датчика, по которому строится отчет","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"interval","in":"query","description":"Интервал трассировки (шага).","required":true,"schema":{"type":"string","enum":["MINUTES_5","MINUTES_30","HOURS_1","HOURS_3","HOURS_6"]}}],"requestBody":{"description":"Период, за который формируется отчет (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Period"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemperatureSensorReport"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при создании файла"}},"security":[{"bearerAuth":[]}]}},"/reports/excel/sensor":{"post":{"tags":["Отчеты"],"summary":"Генерация excel отчета по датчику агрегата","description":"Генерирует excel отчет по датчику агрегата(вкл/выкл)","operationId":"createAggregateSensorReportExcel","parameters":[],"requestBody":{"description":"Период, за который формируется отчет","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Period"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при создании файла"}},"security":[{"bearerAuth":[]}]}},"/reports/devices":{"post":{"tags":["Отчеты"],"summary":"Создание отчета по устройствам или группам","description":"Создает текстовый отчет по переданным ID устройств (`deviceId`) или группы (`groupId`) с использованием выбранного шаблона.\n\n### Особенности:\n- Если передан только один `deviceId`, возвращается отчет по одному устройству.\n- Если передано несколько `deviceId` или один `groupId`, возвращается групповой отчет.\n- Формат и структура отчета определяются параметром `template`.\n\n### Шаблоны:\n- `SummaryReport` – Сводный отчет.\n- `SummaryByDays` – Отчет по дням.\n- `TripsHistory` – Отчет о поездках.\n- `MotohoursReport` – Отчет по моточасам.\n- `VizitingGeozones` – Отчет о посещенных геозонах.\n- `FuelMovement` – Топливный отчет.\n- `FuelChart` – Топливный отчет по транзакициям по топливным картам.\n- `Overspeed` – Отчет по превышениям скорости.\n- `Parkings` – Отчет по стоянкам.\n\n","operationId":"createTrackReport","parameters":[{"name":"deviceId","in":"query","description":"ID устройства, по которому создается отчет.","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"groupId","in":"query","description":"ID группы. Если указано, будет создан групповой отчет.","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"template","in":"query","description":"Шаблон генерации отчета. Определяет формат и состав данных.","required":true,"schema":{"type":"string","enum":["SummaryReport","SummaryByDays","TripsHistory","MotohoursReport","VizitingGeozones","FuelMovement","FuelChart","Overspeed","Parkings"]}},{"name":"provider","in":"query","description":"Поставщие топливных карт. Даступные варианты: ppr, rosneft, opti24","required":false,"schema":{"type":"string","enum":["ppr","rosneft","opti24"]}}],"requestBody":{"description":"Объект `ReportRequestDto`, содержащий временной диапазон отчета в UTC 0.\n\nПример:\n{\n    \"period\": {\n        \"from\": \"2025-07-06T21:00:00Z\",\n        \"to\": \"2025-07-10T23:59:59Z\"\n    }\n}\n","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequestDto"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Внутренняя ошибка сервера"}},"security":[{"bearerAuth":[]}]}},"/reports/devices/{deviceId}/sensors/{sensorId}":{"post":{"tags":["Отчеты"],"summary":"Генерация отчета о работе датчика агрегата.","description":"Генерирует отчет о работе датчика агрегата, т.е датчика типа \"вкл/выкл\"","operationId":"createAggregateSensorReport","parameters":[{"name":"deviceId","in":"path","description":"ID устройства, необходимое для получения позиций этого устройства.","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"sensorId","in":"path","description":"id датчика, по которому строится отчет","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Период, за который формируется отчет (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Period"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при создании файла"}},"security":[{"bearerAuth":[]}]}},"/reports/devices/{deviceId}/sensors/{sensorId}/temper":{"post":{"tags":["Отчеты"],"summary":"Генерация отчета о работе датчика температуры.","description":"Генерирует отчет о работе датчика температуры","operationId":"createTemperSensorReport","parameters":[{"name":"deviceId","in":"path","description":"ID устройства, необходимое для получения позиций этого устройства.","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"sensorId","in":"path","description":"id датчика, по которому строится отчет","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"interval","in":"query","description":"Интервал трассировки (шага).","required":true,"schema":{"type":"string","enum":["MINUTES_5","MINUTES_30","HOURS_1","HOURS_3","HOURS_6"]}}],"requestBody":{"description":"Период, за который формируется отчет (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Period"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemperatureSensorReport"}}}},"204":{"description":"нет данных для отчета"},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при создании файла"}},"security":[{"bearerAuth":[]}]}},"/reports/devices/excel":{"post":{"tags":["Отчеты"],"summary":"Создание Excel отчета по устройствам/группам","description":"Генерирует Excel-файл на основе выбранного шаблона и временного периода.\n\n### Примечания:\n- Метод возвращает файл `.xlsx` напрямую через поток вывода `HttpServletResponse`.\n- Заголовки ответа автоматически устанавливаются для загрузки файла.\n- В имени файла указывается тип отчета (групповой или одиночный), имя шаблона и текущая дата.\n- Если передан только один `deviceId`, возвращается отчет по одному устройству.\n- Если передано несколько `deviceId` или один `groupId`, возвращается групповой отчет.\n- Формат и структура отчета определяются параметром `template`.\n\n                ### Шаблоны:\n- `SummaryReport` – Сводный отчет.\n- `SummaryByDays` – Отчет по дням.\n- `TripsHistory` – Отчет о поездках.\n- `MotohoursReport` – Отчет по моточасам.\n- `VizitingGeozones` – Отчет о посещенных геозонах.\n- `FuelMovement` – Топливный отчет.\n- `FuelChart` – Топливный отчет по транзакициям по топливным картам.\n- `Overspeed` – Отчет по превышениям скорости.\n- `Parkings` – Отчет по стоянкам.\n\n","operationId":"createReportExcel","parameters":[{"name":"deviceId","in":"query","description":"ID устройства, по которому создается отчет.","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"groupId","in":"query","description":"ID группы для создания группового отчета.","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"template","in":"query","description":"Шаблон отчета. Влияет на формат и структуру файла.","required":true,"schema":{"type":"string","enum":["SummaryReport","SummaryByDays","TripsHistory","MotohoursReport","VizitingGeozones","FuelMovement","FuelChart","Overspeed","Parkings"]}},{"name":"provider","in":"query","description":"Поставщие топливных карт. Даступные варианты: ppr, rosneft, opti24","required":false,"schema":{"type":"string","enum":["ppr","rosneft","opti24"]}}],"requestBody":{"description":"Объект, определяющий временной период отчета","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequestDto"}}},"required":true},"responses":{"200":{"description":"Отчет успешно создан","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при создании файла"}},"security":[{"bearerAuth":[]}]}},"/devices/{id}/positions":{"post":{"tags":["Позиции"],"summary":"Получение обработанных позиций устройства за период","description":"Возвращает список обработанных позиций с учетом сенсоров, парковок и часового пояса пользователя.\n","operationId":"calculatePositions","parameters":[{"name":"id","in":"path","description":"ID устройства","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Диапазон времени (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DateRange"}}},"required":true},"responses":{"200":{"description":"Список позиций","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PositionDto"}}}}},"204":{"description":"Нет данных"},"404":{"description":"Устройство не найдено"}},"security":[{"bearerAuth":[]}]}},"/devices/{id}/positions/raw":{"post":{"tags":["Позиции"],"summary":"Получение сырых (необработанных) позиций устройства","description":"Возвращает список позиций без применения бизнес-логики.","operationId":"getRowPositions","parameters":[{"name":"id","in":"path","description":"ID устройства","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Диапазон времени (UTC)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DateRange"}}},"required":true},"responses":{"200":{"description":"Список сырых позиций","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Position"}}}}},"404":{"description":"Устройство не найдено"}},"security":[{"bearerAuth":[]}]}},"/devices/{did}/tracks":{"post":{"tags":["Треки"],"summary":"Создание трека устройства","description":"Генерирует отчёт-трек (*Track*) для указанного `deviceId`\nза выбранный временной интервал.\n\n* Диапазон времени приходит в часовой зоне пользователя,\n  но внутри сервиса конвертируется в UTC.\n* Если конец интервала ближе 120 с к текущему моменту,\n  сервис автоматически сдвигает его на 2 мин назад,\n  чтобы реплики БД успели получить последние точки.\n","operationId":"createTrack","parameters":[{"name":"did","in":"path","description":"ID устройства","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Тело запроса с параметрами трека","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Track"}}},"required":true},"responses":{"200":{"description":"Трек успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackDto"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Внутренняя ошибка сервера"}},"security":[{"bearerAuth":[]}]}},"/server/version":{"get":{"tags":["service-controller"],"operationId":"version","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/server/test":{"get":{"tags":["service-controller"],"operationId":"test","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/server/status":{"get":{"tags":["service-controller"],"operationId":"getStatus","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/rosneft/cards":{"get":{"tags":["Rosneft / Fuel Cards"],"summary":"Соответствие устройств и топливных карт","description":"Возвращает отображение <номер топливной карты → имя устройства> для заданного провайдера.","operationId":"getCardsByDevices","responses":{"200":{"description":"Соответствия получены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Map"}}}}},"security":[{"bearerAuth":[]}]}},"/ppr/integration/cards":{"get":{"tags":["PPR / Fuel Cards"],"summary":"Получить список топливных карт","description":"Запрашивает Petrol Plus и возвращает список всех\nтопливных карт, доступных по API-токену `Token-Key`.\n","operationId":"getFuelCards_1","parameters":[{"name":"Token-Key","in":"header","description":"API-токен Petrol Plus","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Карты успешно получены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FuelCardPpr"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка интеграции Petrol Plus"}},"security":[{"bearerAuth":[]}]}},"/ppr/cards":{"get":{"tags":["PPR / Fuel Cards"],"summary":"Сопоставить устройства и карты","description":"Возвращает отображение «устройство → топливная карта»\nдля указанного провайдера.\n","operationId":"getCardsByDevices_1","responses":{"200":{"description":"Сопоставление успешно построено","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неавторизованный доступ"},"500":{"description":"Ошибка при получении данных"}},"security":[{"bearerAuth":[]}]}},"/positions":{"get":{"tags":["Позиции"],"summary":"Получение последних позиций всех устройств пользователя","description":"Возвращает последние позиции всех устройств, доступных текущему пользователю.\n\n- Для `admin` — все устройства.\n- Для других — только привязанные.\n","operationId":"getUserPositions","responses":{"200":{"description":"Список последних позиций","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Position"}}}}}},"security":[{"bearerAuth":[]}]}},"/opti24":{"get":{"tags":["opti-24-controller-impl"],"operationId":"getFuelCards_2","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Opti24Credential"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FuelCard"}}}}}}}},"/geocode":{"get":{"tags":["geocoding-controller"],"operationId":"geocode","parameters":[{"name":"latitude","in":"query","required":true,"schema":{"type":"number","format":"double"}},{"name":"longitude","in":"query","required":true,"schema":{"type":"number","format":"double"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/devices/{id}/positions/last":{"get":{"tags":["Позиции"],"summary":"Получение последней позиции устройства c расчетом для нее сенсоров","description":"Возвращает последнюю позицию устройства по его ID.","operationId":"getLastPosition","parameters":[{"name":"id","in":"path","description":"ID устройства","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Последняя позиция","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Position"}}}},"204":{"description":"Позиция отсутствует"},"404":{"description":"Устройство не найдено"}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"FuelCardRosneft":{"type":"object","properties":{"Num":{"type":"string"}}},"RosneftCredential":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"},"contractCode":{"type":"string"}}},"CellTower":{"type":"object","properties":{"radioType":{"type":"string"},"cellId":{"type":"integer","format":"int64"},"locationAreaCode":{"type":"integer","format":"int32"},"mobileCountryCode":{"type":"integer","format":"int32"},"mobileNetworkCode":{"type":"integer","format":"int32"},"signalStrength":{"type":"integer","format":"int32"},"operator":{"type":"integer","format":"int64","writeOnly":true}}},"Network":{"type":"object","properties":{"homeMobileCountryCode":{"type":"integer","format":"int32"},"homeMobileNetworkCode":{"type":"integer","format":"int32"},"radioType":{"type":"string"},"carrier":{"type":"string"},"considerIp":{"type":"boolean"},"cellTowers":{"type":"array","items":{"$ref":"#/components/schemas/CellTower"}},"wifiAccessPoints":{"type":"array","items":{"$ref":"#/components/schemas/WifiAccessPoint"}}}},"Position":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"attributes":{"type":"object","additionalProperties":{}},"deviceId":{"type":"integer","format":"int64"},"sensorsAttributes":{"type":"object","additionalProperties":{}},"protocol":{"type":"string"},"serverTime":{"type":"string","format":"date-time"},"deviceTime":{"type":"string","format":"date-time"},"valid":{"type":"boolean"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"altitude":{"type":"number","format":"float"},"speed":{"type":"number","format":"float"},"course":{"type":"number","format":"float"},"address":{"type":"string"},"network":{"$ref":"#/components/schemas/Network"},"geofenceIds":{"type":"array","items":{"type":"integer","format":"int64"}}}},"PositionReportDto":{"type":"object","properties":{"count":{"type":"integer","format":"int32"},"distance":{"type":"number","format":"double"},"averageSpeed":{"type":"number","format":"double"},"maxSpeed":{"type":"number","format":"double"},"positions":{"type":"array","items":{"$ref":"#/components/schemas/Position"}},"source":{"type":"string"}}},"WifiAccessPoint":{"type":"object","properties":{"macAddress":{"type":"string"},"signalStrength":{"type":"integer","format":"int32"},"channel":{"type":"integer","format":"int32"}}},"Period":{"type":"object","properties":{"from":{"type":"string","format":"date-time"},"to":{"type":"string","format":"date-time"}}},"GraphicData":{"type":"object","properties":{"date":{"type":"string","format":"date-time"},"fuelLevel":{"type":"number","format":"double"},"temperature":{"type":"integer","format":"int32"},"tachometer":{"type":"integer","format":"int32"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"trip":{"type":"boolean"},"engineTrip":{"type":"boolean"},"parking":{"type":"boolean"}}},"GroupByDayTemperatureReport":{"type":"object","properties":{"address":{"type":"string"},"sensorData":{"type":"array","items":{"$ref":"#/components/schemas/TemperatureSensorDataForReport"}},"group":{"type":"string","format":"date-time"}}},"PGpoint":{"type":"object","properties":{"type":{"type":"string"},"value":{"type":"string"},"x":{"type":"number","format":"double"},"y":{"type":"number","format":"double"},"isNull":{"type":"boolean"},"location":{"type":"object","deprecated":true,"properties":{"x":{"type":"number","format":"double"},"y":{"type":"number","format":"double"}},"writeOnly":true},"null":{"type":"boolean"}}},"TemperatureSensorDataForReport":{"type":"object","properties":{"time":{"type":"string","format":"date-time"},"address":{"type":"string"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"temp":{"type":"integer","format":"int32"}}},"TemperatureSensorReport":{"type":"object","properties":{"groupedByDay":{"type":"array","items":{"$ref":"#/components/schemas/GroupByDayTemperatureReport"}},"waypoints":{"type":"array","items":{"$ref":"#/components/schemas/PGpoint"}},"averageTemperature":{"type":"integer","format":"int32"},"graphic":{"type":"array","items":{"$ref":"#/components/schemas/GraphicData"}}}},"ReportRequestDto":{"type":"object","properties":{"period":{"$ref":"#/components/schemas/Period"},"tripColor":{"$ref":"#/components/schemas/TripColor"}}},"TripColor":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"displayType":{"type":"string"},"lineThick":{"type":"array","items":{"type":"integer","format":"int32"}},"colors":{"type":"array","items":{"type":"string"}},"speedBreakpoints":{"type":"array","items":{"type":"integer","format":"int32"}}}},"PositionDto":{"type":"object","properties":{"deviceId":{"type":"integer","format":"int64"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"address":{"type":"string"},"altitude":{"type":"number","format":"float"},"distance":{"type":"number","format":"double"},"motion":{"type":"boolean"},"isParking":{"type":"boolean"},"sat":{"type":"integer","format":"int32"},"course":{"type":"number","format":"float"},"speed":{"type":"number","format":"float"},"deviceTime":{"type":"string","format":"date-time"},"geofenceIds":{"type":"array","items":{"type":"integer","format":"int64"}},"sensorsAttributes":{"type":"object","additionalProperties":{}}}},"DateRange":{"type":"object","properties":{"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"}}},"Bounds":{"type":"object","properties":{"up":{"$ref":"#/components/schemas/PGpoint"},"down":{"$ref":"#/components/schemas/PGpoint"}}},"Device":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"protocol":{"type":"string"},"name":{"type":"string"},"uniqueId":{"type":"string"},"lastPosition":{"type":"string","format":"date-time"},"positionId":{"type":"integer","format":"int64"}}},"ReportItem":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"}}},"Sensor":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"attributes":{"type":"object","additionalProperties":{}},"deviceId":{"type":"integer","format":"int64"},"name":{"type":"string"},"type":{"type":"string","enum":["fuel","ignition","voltage","aggregate","arbitrary","odometer","dart","tachometer","temperature"]},"description":{"type":"string"},"param":{"type":"string"},"unit":{"type":"string"},"visible":{"type":"boolean"},"pairs":{"type":"array","items":{"$ref":"#/components/schemas/PGpoint"}},"orderId":{"type":"integer","format":"int32"},"uplimit":{"type":"number","format":"double"},"lowlimit":{"type":"number","format":"double"}}},"TrackDateEvent":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"address":{"type":"string"},"attributes":{"type":"object","additionalProperties":{}},"duration":{"type":"integer","format":"int64"},"eventTime":{"type":"string","format":"date-time"}}},"TrackDto":{"type":"object","properties":{"deviceId":{"type":"integer","format":"int64"},"deviceName":{"type":"string"},"totalDistance":{"type":"integer","format":"int64"},"trackEvents":{"type":"array","items":{"type":"string"}},"device":{"$ref":"#/components/schemas/Device"},"sensors":{"type":"array","items":{"$ref":"#/components/schemas/Sensor"}},"tripColor":{"$ref":"#/components/schemas/TripColor"},"start":{"$ref":"#/components/schemas/TrackPositionEvent"},"end":{"$ref":"#/components/schemas/TrackPositionEvent"},"period":{"$ref":"#/components/schemas/Period"},"trips":{"type":"array","items":{"$ref":"#/components/schemas/TrackTripDto"}},"bounds":{"$ref":"#/components/schemas/Bounds"}}},"TrackPositionEvent":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"address":{"type":"string"},"attributes":{"type":"object","additionalProperties":{}},"duration":{"type":"integer","format":"int64"}}},"TrackTripDto":{"type":"object","properties":{"overspeedEvents":{"type":"array","items":{"$ref":"#/components/schemas/TrackPositionEvent"}},"startEvent":{"$ref":"#/components/schemas/TrackDateEvent"},"endEvent":{"$ref":"#/components/schemas/TrackDateEvent"},"parkingEvent":{"$ref":"#/components/schemas/TrackPositionEvent"},"drainEvents":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"refillEvents":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"waypoints":{"type":"array","items":{"$ref":"#/components/schemas/Waypoints"}},"totalDistance":{"type":"number","format":"double"}}},"Waypoints":{"type":"object","properties":{"waypoint":{"$ref":"#/components/schemas/PGpoint"},"speed":{"type":"integer","format":"int64"},"course":{"type":"number","format":"double"},"deviceTime":{"type":"string","format":"date-time"},"isSatMiss":{"type":"boolean"}}},"EngineTrip":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"startAddress":{"type":"string"},"startWaypoint":{"$ref":"#/components/schemas/PGpoint"},"end":{"type":"string","format":"date-time"},"endAddress":{"type":"string"},"endWaypoint":{"$ref":"#/components/schemas/PGpoint"},"motionHours":{"type":"integer","format":"int64"},"standHours":{"type":"integer","format":"int64"},"hours":{"type":"integer","format":"int64"},"totalDistance":{"type":"number","format":"double"},"waypoints":{"type":"array","items":{"$ref":"#/components/schemas/Waypoints"}},"totalFuelConsumed":{"type":"number","format":"double"},"fuelConsumedByEngineHour":{"type":"number","format":"double"}}},"FuelStatistic":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"averageFuelConsumption":{"type":"number","format":"double"},"mileage":{"type":"number","format":"double"},"engineHours":{"type":"integer","format":"int64"},"totalFuelRefilled":{"type":"number","format":"double"},"refuelEventsCount":{"type":"integer","format":"int32"},"fuelDrainsCount":{"type":"integer","format":"int32"},"totalFuelConsumed":{"type":"number","format":"double"},"averageFuelConsumptionEngineHours":{"type":"number","format":"double"},"fuelConsumedDuringIdle":{"type":"number","format":"double"},"totalFuelStolen":{"type":"number","format":"double"},"initialFuelLevel":{"type":"number","format":"double"},"finalFuelLevel":{"type":"number","format":"double"}}},"GroupedTracksDto":{"type":"object","properties":{"byTrip":{"$ref":"#/components/schemas/ReportByTrip"},"byGrouping":{"$ref":"#/components/schemas/ReportByGrouping"},"byParking":{"$ref":"#/components/schemas/ReportByParking"},"byExcessSpeed":{"$ref":"#/components/schemas/ReportByExcessSpeed"},"byEngine":{"$ref":"#/components/schemas/ReportByEngine"},"groupedByFuel":{"$ref":"#/components/schemas/ReportByFuel"},"summaryReportGeofence":{"$ref":"#/components/schemas/SummaryReportGeofence"},"geofenceReport":{"$ref":"#/components/schemas/ReportByGeofence"},"visitingGeofences":{"type":"array","items":{"$ref":"#/components/schemas/VisitingGeofence"}},"parkingEvents":{"type":"array","items":{"$ref":"#/components/schemas/TrackDurationEvent"}},"overspeedEvents":{"type":"array","items":{"$ref":"#/components/schemas/TrackPositionEvent"}},"engineTrips":{"type":"array","items":{"$ref":"#/components/schemas/EngineTrip"}},"trips":{"type":"array","items":{"$ref":"#/components/schemas/Trip"}},"group":{"type":"string","format":"date-time"}}},"RefuelWithFuelCard":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"end":{"type":"string","format":"date-time"},"address":{"type":"string"},"fuelLevelBeforeChange":{"type":"number","format":"double"},"fuelChanged":{"type":"number","format":"double"},"fuelLevelAfterChange":{"type":"number","format":"double"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"totalRefuel":{"type":"number","format":"double"},"paidFuel":{"type":"number","format":"float"},"diff":{"type":"number","format":"double"},"anomaly":{"type":"boolean"}}},"ReportByEngine":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"startAddress":{"type":"string"},"startWaypoint":{"$ref":"#/components/schemas/PGpoint"},"end":{"type":"string","format":"date-time"},"endAddress":{"type":"string"},"endWaypoint":{"$ref":"#/components/schemas/PGpoint"},"engineTrips":{"type":"array","items":{"$ref":"#/components/schemas/EngineTrip"}},"hours":{"type":"integer","format":"int64"},"motionHours":{"type":"integer","format":"int64"},"standHours":{"type":"integer","format":"int64"},"totalFuelConsumed":{"type":"number","format":"double"},"fuelConsumedByEngineHour":{"type":"number","format":"double"}}},"ReportByExcessSpeed":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"address":{"type":"string"},"speedWaypoint":{"$ref":"#/components/schemas/PGpoint"},"duration":{"type":"integer","format":"int32"},"maxSpeed":{"type":"integer","format":"int32"},"speedLimit":{"type":"integer","format":"int32"},"count":{"type":"integer","format":"int32"},"overspeedEvents":{"type":"array","items":{"$ref":"#/components/schemas/TrackPositionEvent"}}}},"ReportByFuel":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"fuelStatistic":{"$ref":"#/components/schemas/FuelStatistic"},"drains":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"refuels":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"fuelDataWithFuelCard":{"$ref":"#/components/schemas/ReportWithFuelCard"}}},"ReportByGeofence":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"visitingGeofences":{"type":"array","items":{"$ref":"#/components/schemas/VisitingGeofence"}}}},"ReportByGrouping":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"totalDistance":{"type":"integer","format":"int64"},"maxSpeed":{"type":"integer","format":"int32"},"averageSpeed":{"type":"integer","format":"int32"},"initialFuelLevel":{"type":"number","format":"double"},"totalFuelConsumed":{"type":"number","format":"double"},"finalFuelLevel":{"type":"number","format":"double"},"averageFuelConsumption":{"type":"number","format":"double"},"averageFuelConsumptionByHours":{"type":"number","format":"double"},"refuels":{"type":"integer","format":"int32"},"refilled":{"type":"number","format":"double"},"drains":{"type":"integer","format":"int32"},"drained":{"type":"number","format":"double"},"parking":{"type":"integer","format":"int64"},"motionHours":{"type":"integer","format":"int64"},"motohours":{"type":"integer","format":"int64"}}},"ReportByParking":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"end":{"type":"string","format":"date-time"},"address":{"type":"string"},"parkingEvents":{"type":"array","items":{"$ref":"#/components/schemas/TrackDurationEvent"}},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"duration":{"type":"integer","format":"int64"},"count":{"type":"integer","format":"int32"}}},"ReportByTrip":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"start":{"type":"string","format":"date-time"},"startWaypoint":{"$ref":"#/components/schemas/PGpoint"},"end":{"type":"string","format":"date-time"},"endWaypoint":{"$ref":"#/components/schemas/PGpoint"},"startAddress":{"type":"string"},"endAddress":{"type":"string"},"totalDistance":{"type":"integer","format":"int64"},"driveDuration":{"type":"integer","format":"int64"},"averageSpeed":{"type":"integer","format":"int32"},"maxSpeed":{"type":"integer","format":"int32"},"count":{"type":"integer","format":"int32"},"trips":{"type":"array","items":{"$ref":"#/components/schemas/Trip"}},"totalFuelConsumed":{"type":"number","format":"double"}}},"ReportStatistic":{"type":"object","properties":{"deviceName":{"type":"string"},"start":{"type":"string","format":"date-time"},"end":{"type":"string","format":"date-time"},"totalDistance":{"type":"integer","format":"int64"},"driveDuration":{"type":"integer","format":"int64"},"averageSpeed":{"type":"integer","format":"int32"},"maxSpeed":{"type":"integer","format":"int32"},"hours":{"type":"integer","format":"int64"},"parkingCount":{"type":"integer","format":"int32"},"parkingDuration":{"type":"integer","format":"int64"},"averageFuelConsumption":{"type":"number","format":"double"},"totalFuelRefilled":{"type":"number","format":"double"},"refuelEventsCount":{"type":"integer","format":"int32"},"fuelDrainsCount":{"type":"integer","format":"int32"},"totalFuelConsumed":{"type":"number","format":"double"},"averageFuelConsumptionEngineHours":{"type":"number","format":"double"},"fuelConsumedDuringIdle":{"type":"number","format":"double"},"totalFuelStolen":{"type":"number","format":"double"},"initialFuelLevel":{"type":"number","format":"double"},"finalFuelLevel":{"type":"number","format":"double"},"fuelStatistic":{"$ref":"#/components/schemas/FuelStatistic","writeOnly":true}}},"ReportWithFuelCard":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"totalRefuel":{"type":"number","format":"double"},"paidFuel":{"type":"number","format":"float"},"diff":{"type":"number","format":"double"},"refuelCount":{"type":"integer","format":"int32"},"refuelsWithFuelCard":{"type":"array","items":{"$ref":"#/components/schemas/RefuelWithFuelCard"}},"anomaly":{"type":"boolean"}}},"SummaryReportGeofence":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"totalStay":{"type":"integer","format":"int64"},"count":{"type":"integer","format":"int32"}}},"Track":{"type":"object","properties":{"deviceId":{"type":"integer","format":"int64"},"deviceName":{"type":"string"},"totalDistance":{"type":"integer","format":"int64"},"trackEvents":{"type":"array","items":{"type":"string"}},"device":{"$ref":"#/components/schemas/Device"},"sensors":{"type":"array","items":{"$ref":"#/components/schemas/Sensor"}},"tripColor":{"$ref":"#/components/schemas/TripColor"},"period":{"$ref":"#/components/schemas/Period"},"trips":{"type":"array","items":{"$ref":"#/components/schemas/Trip"}},"groupBy":{"type":"array","items":{"type":"string","enum":["day","week","month"]}},"statistic":{"$ref":"#/components/schemas/ReportStatistic"},"groupedTracks":{"type":"array","items":{"$ref":"#/components/schemas/GroupedTracksDto"}}}},"TrackDurationEvent":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"waypoint":{"$ref":"#/components/schemas/PGpoint"},"address":{"type":"string"},"attributes":{"type":"object","additionalProperties":{}},"duration":{"type":"integer","format":"int64"},"start":{"type":"string","format":"date-time"},"end":{"type":"string","format":"date-time"}}},"Trip":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"waypoints":{"type":"array","items":{"$ref":"#/components/schemas/Waypoints"}},"totalDistance":{"type":"number","format":"double"},"averageSpeed":{"type":"integer","format":"int32"},"maxSpeed":{"type":"integer","format":"int32"},"motionHours":{"type":"integer","format":"int64"},"totalFuelConsumed":{"type":"number","format":"double"},"start":{"$ref":"#/components/schemas/TrackDateEvent"},"end":{"$ref":"#/components/schemas/TrackDateEvent"}}},"VisitingGeofence":{"type":"object","properties":{"groupList":{"type":"array","items":{"$ref":"#/components/schemas/ReportItem"}},"groupingTime":{"type":"string","format":"date-time"},"name":{"type":"string"},"area":{"type":"string"},"entry":{"type":"string","format":"date-time"},"exit":{"type":"string","format":"date-time"},"totalStay":{"type":"integer","format":"int64"},"count":{"type":"integer","format":"int32"}}},"FuelCardPpr":{"type":"object","properties":{"cardNum":{"type":"integer","format":"int64"}}},"Opti24Credential":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"},"apiKey":{"type":"string"}}},"FuelCard":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"deviceId":{"type":"integer","format":"int64"},"cardNum":{"type":"string"},"provider":{"type":"string","enum":["ppr","rosneft","opti24"]}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}